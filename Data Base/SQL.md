<!--
 * @Author: YangFang
 * @Date: 2025-03-11 17:05:49
 * @LastEditTime: 2025-03-13 20:33:29
 * @Description: 
-->
# SQL 数据库笔记

## 数据库基本概念

### 数据库系统概述
- **数据**：是数据库中存储的基本对象，是描述事物的符号记录
- **数据的分类**：文本、图形、图像、音频、视频。
- **数据库DB**：是长期存储在计算机内、有组织的、可共享的大量数据的集合。
- **数据库的基本特征**：数据按照一定的数据模型组织、描述和存储。
  1. 可为各种用户共享
  2. 数据具有较小的冗余度
  3. 数据具有较高的数据独立性
  4. 数据具有较高的安全性
- **数据库系统DBS(Database System)**：是一个采用了数据库技术、有组织地、动态地存储大量相关数据、方便多用户访问的系统。由以下四个部分组成
  1. **数据库**：统一管理、长期存储在计算机内的，有组织的，可共享的大量数据的集合
  2. **硬件**：构成计算机系统包括存储数据所需的外部设备
  3. **软件**：操作系统、数据库管理系统 (DBMS)、应用程序。
  4. **人员**：系统分析和数据库设计人员、应用程序员、最终用户、数据库管理员 (DBA)。
- **数据库管理系统DBMS**：实现对共享数据有效地组织和存取。主要功能有：
  1. **数据定义**：定义数据库的结构和约束。
  2. **数据库操作**：支持数据的查询、插入、更新和删除。
  3. **数据库运行管理**：确保数据库的高效运行和数据一致性。
  4. **数据的存储管理**：管理数据的物理存储和访问。
  5. **数据库的建立和维护**：支持数据库的创建、备份、恢复和优化。
  
### 三级模式两级映射
- **三级模式**：数据库管理系统从三个层次来管理数据，分别是外部层，概念层，内部层，它们对应的模式分别是外模式，概念模式，内模式。
  1. **外模式**：面向应用程序，描述用户的数据视图（以视图的形式）。
  2. **概念模式**：又称模式，逻辑模式，面向数据库设计人员，描述数据库整体逻辑结构。(以表的形式)
  3. **内模式**：又称为物理模式，存储模式，面向物理上的数据库，描述数据在磁盘上如何存储(以文件的形式)
  基本表中的数据是实际存储在数据库中的，而用户的视图是查询或者计算出来的。因此一个数据库中的外模式有一个或者多个，而概念模式和内模式只有一个。
- **两级映射**：为了使三级模式之间产生关联，数据通过二级映像体现了逻辑独立性和物理独立性两个层面的数据独立性。
  1. **外模式/模式映射**：外模式和模式的对应关系。
    - **体现**：逻辑独立性。
    - **定义**：当修改了概念模式，不影响其上一层的外模式。
    - **示例**：将基本表的“库存”和“销量”拆分到另一张表中，概念模式发生更改，但通过改变外模式/概念模式的映像，可以继续为用户提供原有的视图。
  2. **模式/内模式映射**：模式和内模式的对应关系。
    - **体现**：物理独立性。
    - **定义**：修改了内模式，不影响其上层的概念模式和外模式。
    - **示例**：在Excel中将.xls文件另存为.xlsx文件，文件格式更换，但打开文件后显示的表格内容一般不会改变。在数据库中，更换存储结构或创建索引以加快查询速度，内模式发生改变，只需改变概念模式/内模式映像，就不会影响原有的概念模式。
    
### 数据库设计
- **数据库设计的基本流程**：记住每一步骤，并且记住每一步骤的产出物
  1. **需求分析**：分析数据存储的要求。获得用户对系统的三个要求：信息要求、处理要求、系统要求。
    - **产出物**：
      - 数据流图
      - 数据字典
      - 需求说明书
  2. **概念结构设计**：设计E-R图（实体-联系图）。
    - **产出物**：
      - E-R图
    - **工作步骤**：
      - 选择局部应用
      - 逐一设计分E-R图
      - E-R图合并
      - **合并冲突**：
        - 同一属性存在于不同的分E-R图中
        - 相同意义的属性在不同分E-R图上有不同的命名或意义
        - 同一实体在不同分E-R图中有不同的属性，或同一对象在不同分E-R图中被抽象为实体或属性
  3. **逻辑结构设计**：将E-R图转换成关系模式。
    - **产出物**：
      - 关系模式
  4. **物理设计**：确定数据分布、存储结构和访问方式。
    - **产出物**：
      - 数据分布方案
      - 存储结构设计
      - 访问方式设计
  5. **数据库实施**：根据逻辑设计和物理设计的结果建立数据库。
    - **产出物**：
      - 数据库实例
      - 调试通过的应用程序
      - 组织好的数据入库
  6. **数据库运行和维护**：数据库应用系统经过试运行后投入运行。

